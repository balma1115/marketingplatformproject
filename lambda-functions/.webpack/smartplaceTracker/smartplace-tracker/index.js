(()=>{var e={446:e=>{"use strict";e.exports=require(".prisma/client/default")},610:(e,r,o)=>{e.exports={...o(446)}}},r={};function o(s){var t=r[s];if(void 0!==t)return t.exports;var a=r[s]={exports:{}};return e[s](a,a.exports,o),a.exports}var s={};(()=>{"use strict";var e=s;Object.defineProperty(e,"__esModule",{value:!0}),e.handler=void 0;const r=new(o(610).PrismaClient);function t(){const e=new Date,r=e.getTime()+6e4*e.getTimezoneOffset();return new Date(r+324e5)}e.handler=async(e,o)=>{const s=Date.now(),a=[];for(const o of e.Records){const e=JSON.parse(o.body);console.log(`Processing smartplace keyword: ${e.keyword} (ID: ${e.keywordId})`);try{const o=t();await r.smartPlaceRanking.create({data:{keywordId:e.keywordId,checkDate:o,organicRank:null,adRank:null,topTenPlaces:"[]"}}),a.push({keywordId:e.keywordId,success:!0,message:"Queued for processing"}),console.log(`Successfully queued smartplace keyword ${e.keyword}`)}catch(r){throw console.error(`Error processing smartplace keyword ${e.keyword}:`,r),a.push({keywordId:e.keywordId,success:!1,error:r.message}),r}}return{statusCode:200,body:JSON.stringify({message:"SmartPlace tracking requests queued",results:a,totalDuration:(Date.now()-s)/1e3})}}})(),module.exports=s})();